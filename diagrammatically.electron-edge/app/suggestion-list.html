<link rel="import" href="suggestion-word.html">
<template id="template-suggestion-list">
    <style>
        .suggestion-list {
            display: flex;
            flex-direction: column;
            justify-content: top;
            height: 380px;
        }
    </style>
    <div class="suggestion-list"></div>
</template>
<script>
    (function (owner) {
        class SuggestionList extends HTMLElement {
            constructor() {
                super()
                const template = owner.querySelector('#template-suggestion-list').content
                const instance = template.cloneNode(true)

                let shadowRoot = this.attachShadow({ mode: 'open' })
                shadowRoot.appendChild(instance)

                this.wordList = shadowRoot.querySelector(".suggestion-list")
            }
            connectedCallback() {               
            }
            static get observedAttributes() {
                return ['words'];
            }
            attributeChangedCallback(attrName, oldVal, newVal) {
                if (this.wordList && attrName == 'words' && newVal) {
                    var rangeObj = new Range();

    // Select all of theParent's children
                    rangeObj.selectNodeContents(this.wordList);

                    // Delete everything that is selected
                    rangeObj.deleteContents();
                    
                    this.getAttribute('words')
                    .split('|')
                    .map(word => {
                        const worditem = document.createElement('suggestion-word')
                        worditem.setAttribute("text", word)
                        return worditem
                    })
                    .forEach(element => {
                        this.wordList.appendChild(element)
                    })
                }
            }
        }
        customElements.define('suggestion-list', SuggestionList)
    })(document.currentScript.ownerDocument)
</script>